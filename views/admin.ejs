<%- include('./partials/header') %>

<div class="w-full h-screen flex items-start px-20 py-20 bg-gray-100">
  <div class="w-[25%] flex h-screen flex-col items-start">
    <div class="flex flex-col">
      <a class="block w-fit mb-2 text-blue-500 hover:text-blue-700" href="">All Products</a>
      <a class="block w-fit mb-2 text-blue-500 hover:text-blue-700" href="/owners/admin">Create new product</a>
    </div>
  </div>

  <div class="w-[75%] flex flex-col gap-5 h-screen">
    <a class="text-red-500 hover:text-red-700" href="/products/delete">Delete all</a>

    <% if (products.length > 0) { %>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
        <% products.forEach(product => { %>
          <div
            class="flex flex-col w-full rounded-lg overflow-hidden shadow-lg transition-transform transform hover:scale-105 p-2"
            style="background-color: <%= product.bgcolor %>;"
          >
            <div
              class="w-full h-54 flex items-center justify-center bg-gray-200 rounded-t-lg overflow-hidden"
              
            >
              <img
               style="object-fit:contain;background-position: center; height: 300px"
                src="data:image/png;base64,<%= product.image.toString('base64') %>"
                alt="<%= product.name %>"
              />
            </div>
            <div
              class="flex flex-col px-3 py-2"
              style="color: <%= product.textcolor %>; background-color: <%= product.panelcolor %>;"
            >
              <h3 class="text-md font-semibold mb-1"><%= product.name %></h3>
              <div class="flex items-baseline gap-2 mb-2">
                <h4 class="font-bold text-lg text-red-600 line-through">₹ <%= product.price %></h4>
                <h4 class="font-bold text-lg text-green-600">₹ <%= product.discount %></h4>
              </div>
            </div>
            <div class="flex flex-col px-3 py-2" style="color: <%= product.textcolor %>; background-color: <%= product.panelcolor %>;">
              <p class="text-sm"><%= product.description %></p>
            </div>
            <div class="flex items-center justify-between px-3 py-2" style="background-color: <%= product.panelcolor %>;">
              <a
                class="w-8 h-8 flex items-center justify-center rounded-full bg-white hover:bg-gray-200 transition-colors"
                href="/products/delete/<%= product._id %>"
              >
                <i class="ri-delete-bin-line text-red-600 text-lg"></i>
              </a>
              <a
                class="w-8 h-8 flex items-center justify-center rounded-full bg-white hover:bg-gray-200 transition-colors"
                href="/products/edit/<%= product._id %>"
              >
                <i class="ri-edit-line text-lg"></i>
              </a>
            </div>
          </div>
        <% }) %>
      </div>
    <% } else { %>
      <p class="text-gray-500 text-center">No products available.</p>
    <% } %>
  </div>
</div>

<%- include('./partials/footer') %>
